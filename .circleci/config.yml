version: 2.1
orbs:
  node: circleci/node@3.0.0

parameters:
  run_alternative_servers:
    type: string
    default: ""

jobs:
  testjob:
    docker:
      - image: alpine:3.18.0
    steps:
      - unless:
          condition: <<pipeline.parameters.run_alternative_servers>>
          steps:
            - run:
                name: Build
                command: npm run build
      - when:
          condition: <<pipeline.parameters.run_alternative_servers>>
          steps:
            - run:
              command: npm test
      - run: echo "USE CircleCI parameter/ENV variable here and in next steps"

workflows:
  testworkflow:
    jobs:
      - testjob
